<div class="modalbox">

  <ion-row class="is-topStickyHeader">
    <ion-col size="10" class="ion-text-start heading">
      <p class="header">Update Contact</p>
    </ion-col>
    <ion-col size="2">
      <a class="clearicon" mat-icon-button (click)="closepopup()">
        <ion-icon name="close-outline"></ion-icon>
      </a>
    </ion-col>
  </ion-row>

  <div class="modalbody">
    <ion-row>
      <ion-col size="12" size-sm="12" size-md="12" size-lg="12" size-xl="12" class="is-d-flex is-justify-content-center">
        <div class="is-profile text-center">
          <div *ngIf="contactImgSrc == 'data:image/png;base64,null' ||
          contactImgSrc == 'data:image/png;base64,' || contactImgSrc == '' || contactImgSrc == null ">
            <span class="is-position-relative _proText mt-4">
              <button [matTooltip]="firstName | titlecase" class="mx-2 _Updateprofile"
                [ngClass]="firstName.substring(0, 1) | titlecase" mat-mini-fab>
                {{ firstName.substring(0, 1) | titlecase }}
              </button>
            </span>
          </div>
          <div *ngIf="!(contactImgSrc == 'data:image/png;base64,null' ||
          contactImgSrc == 'data:image/png;base64,' || contactImgSrc == '' || contactImgSrc == null)">
            <img class="_image" [src]="_d.bypassSecurityTrustUrl(contactImgSrc)" alt="{{ productName }}"/>
          </div>
          <input type="file" accept=".jpg,.jpeg,.png" #fileInputUpload class="_uploadBtn" (change)="fileChangeUpdate($event)"/>
          <button mat-icon-button (click)="fileInputUpload.click()" class="_Upload">
            <span class="material-icons-outlined _uploadIcon">image</span>
          </button>
        </div>
      </ion-col>
    </ion-row>
    <form [formGroup]="contactForm" class="_contactForm" autocomplete="off">
      <ion-row class="mb-2">
        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>First Name</mat-label>
            <input class="inputField" type="text" matInput maxlength="30" placeholder="First Name" formControlName="fname"
            oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ><?:!@#$%^&*|[] ]|^ /g,'')" required/>
            <mat-error *ngIf="contactForm.get('fname').hasError('invalid') || contactForm.get('fname').hasError('required')">
              First Name is required!
            </mat-error>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>Last Name</mat-label>
              <input class="inputField" type="text" matInput maxlength="30" placeholder="Last Name" formControlName="lname"
              oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ><?:!@#$%^&*|[] ]|^ /g,'')" />
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="12" size-lg="12" size-xl="12" class="inputfileds">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>Email</mat-label>
            <input class="inputField" type="text" matInput maxlength="50" placeholder="Email" formControlName="email"/>
            <mat-error *ngIf="contactForm.get('email').hasError('email') && contactForm.get('email').hasError('pattern')">
              Email must be a valid!
            </mat-error>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6" class="inputfileds">
          <mat-form-field class="expiry-date" appearance="outline">
            <mat-label>Date of Birth</mat-label>
              <input class="inputField" matInput id="date" [matDatepicker]="picker" formControlName="dob" [max]="maxDate" readonly/>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6" class="inputfileds">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>Phone Number</mat-label>
            <input class="inputField" type="text" matInput placeholder="Phone Number" numbersOnly maxlength="10"
              formControlName="phone" oninput="this.value = this.value.replace(/[^0-9]|^ /g,'')"/>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="12" size-lg="12" class="ion-text-center inputfileds">
          <mat-form-field class="example-full" appearance="outline">
            <mat-label>Address (Area or Street)</mat-label>
            <textarea class="inputField" matInput formControlName="address" value="{{address}}"></textarea>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6" class="inputfileds">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>City</mat-label>
            <input class="inputField" type="text" matInput maxlength="50" placeholder="City" formControlName="city"
              oninput="this.value = this.value.replace(/[^A-Za-z]|^ /g,'')"/>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6" class="inputfileds">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>State</mat-label>
            <input class="inputField" type="text" matInput maxlength="50" placeholder="State" formControlName="state"
              oninput="this.value = this.value.replace(/[^A-Za-z]|^ /g,'')"/>
          </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6" class="inputfileds">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>Country</mat-label>
            <input class="inputField" type="text" matInput maxlength="50" placeholder="Country" formControlName="country"
              oninput="this.value = this.value.replace(/[^A-Za-z]|^ /g,'')"/>
            </mat-form-field>
        </ion-col>

        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="6" class="inputfileds">
          <mat-form-field class="example-full-width is-contact" appearance="outline">
            <mat-label>Postal Code</mat-label>
            <input class="inputField" type="text" matInput placeholder="Postal Code" maxlength="6" formControlName="postcode" 
              oninput="this.value = this.value.replace(/[^0-9]|^ /g,'')"/>
          </mat-form-field>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12" size-sm="12" size-md="12" size-lg="12" class="is-d-flex is-justify-content-center">
          <button mat-raised-button color="primary" [disabled]="contactForm.get('email').hasError('email') && contactForm.get('email').hasError('pattern')" (click)="OnUpdateContact()">Save</button>
        </ion-col>
      </ion-row>
    </form>
  </div>

</div>